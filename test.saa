/* Setup */
MOVWal R13,0xF000
MOVTal R0,0x3F20
ADDalI R1,R0,0x010
MOVTal R2,0x0020
STRalI R2,R1,0x000
ADDalI R1,R0,0x020 /* SET register */
ADDalI R2,R0,0x02C /* CLEAR register */
MOVWal R3,0x8000   /* number to write to SET or CLEAR registers */
MOVTal R4, 0x000A  /* the variable for the delay */

/* led on */
startLoop: PUSHal R0
PUSHal R1
PUSHal R2
PUSHal R3
PUSHal R1 /* param 1 */
PUSHal R3 /* param 2 */
BLal switchLed
POPal R3
POPal R2
POPal R1
POPal R0
PUSHal R4
PUSHal R4 /* param 1*/
BLal delay
POPal R4

/* led off */
PUSHal R0
PUSHal R1
PUSHal R2
PUSHal R3
PUSHal R2 /* param 1 */
PUSHal R3 /* param 2 */
BLal switchLed
POPal R3
POPal R2
POPal R1
POPal R0
PUSHal R4
PUSHal R4 /* param 1*/
BLal delay
POPal R4
Bal startLoop

/* Subroutines */
switchLed: POPal R0
POPal R1
STRalI R0,R1,0x000
MOVal R15,R14

delay: POPal R0
sub: SUBalIS R0,R0,0x001
Bne sub
MOVal R15,R14